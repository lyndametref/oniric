|<?php
|/*
|Template Name: Archives
|*/
|?>

- get_header();
.container
	- $paged = ( get_query_var( 'paged' ) ) ? get_query_var( 'paged' ) : 1;
	- $total_posts = wp_count_posts()->publish;
	- $posts_per_page = 9
	- $args = array( 'posts_per_page' => $posts_per_page, 'order'=> "DES", 'orderby' => 'date' , 'offset' => ($paged-1)*$posts_per_page);
	- $postslist = get_posts( $args );
	- $count = 0;
	- foreach ( $postslist as $post ) :
	- setup_postdata( $post );
	- if ($count%3 == "0"):
	| <div class='row'>
	- endif;
		.col-lg-4
			h1
				- the_shortlink(get_the_title());
			h4
				- the_date();

			.post-featured-image
				- if ( has_post_thumbnail() ) :
				a(href="<?php the_permalink(); ?>", title="<?php the_title_attribute(); ?>")
					- the_post_thumbnail(array(250,350));
				- endif;

			.post-body
				- the_excerpt('Pour en savoir plus');
	- if ($count%3 == "0"):
	| </div>
	- endif;

	- $count++;
	- endforeach;
	- wp_reset_postdata();

	.row
		.col-lg-12

			|	<?php $args = array(
			|		'base'               => '%_%',
			|		'format'             => '?paged=%#%',
			|		'total'              => ceil($total_posts/$posts_per_page),
			|		'current'            => $paged,
			|		'show_all'           => false,
			|		'end_size'           => 1,
			|		'mid_size'           => 2,
			|		'prev_next'          => true,
			|		'prev_text'          => __('« Previous'),
			|		'next_text'          => __('Next »'),
			|		'type'               => 'plain',
			|		'add_args'           => false,
			|		'add_fragment'       => '',
			|		'before_page_number' => '',
			|		'after_page_number'  => '');
			|		echo paginate_links($args); ?>

- get_footer();
